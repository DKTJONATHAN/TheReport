name: Daily llms.txt (Root + Public)
on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:
jobs:
  generate:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
    - uses: actions/checkout@v4
    - name: Generate
      run: |
        npx llmstxt@latest gen https://www.jonathanmwaniki.co.ke/sitemap-0.xml --exclude-path "**/privacy**" --exclude-path "**/terms**" > llms.txt
        mkdir -p public
        cp llms.txt public/llms.txt
        ls -la public/llms.txt
    - name: Commit Specific
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: llms.txt root + public
        file_pattern: |
          llms.txt
          public/llms.txt
        skip_fetch: true